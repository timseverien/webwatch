---
import { getProposals as getEcma262Proposals } from '@ww/core/dist/integrations/tc39/ecma262';
import { getProposals as getEcma402Proposals } from '@ww/core/dist/integrations/tc39/ecma402';
import TC39ProposalCard from '../components/TC39ProposalCard.astro';

const proposalsEcma262 = await getEcma262Proposals();
const proposalsEcma402 = await getEcma402Proposals();
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
	</head>
	<body>
		<h1>Webwatch (working title)</h1>

		<h2>JavaScript/ECMA262 proposals</h2>
		<ul class="proposal-list">
			{
				proposalsEcma262
					.sort((a, b) => b.stage - a.stage)
					.map((proposal) => (
						<li>
							<TC39ProposalCard proposal={proposal} />
						</li>
					))
			}
		</ul>

		<h2>JavaScript Intl/ECMA402 proposals</h2>
		<ul class="proposal-list">
			{
				proposalsEcma402
					.sort((a, b) => b.stage - a.stage)
					.map((proposal) => (
						<li>
							<TC39ProposalCard proposal={proposal} />
						</li>
					))
			}
		</ul>
	</body>
</html>

<style>
	@import 'modern-css-reset';

	:root {
		font-family: system-ui, sans-serif;
	}

	.proposal-list {
		display: grid;
		grid-template-columns: repeat(auto-fit, 48ch);
		gap: 1em;

		list-style-type: none;
	}
</style>

<style is:global>
	code {
		font-family: monospace, monospace;
		font-size: inherit;
	}
</style>
